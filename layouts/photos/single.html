{{ define "meta" }}
{{ $image := (index (.Resources.ByType "image") 0 ) }}

<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": "ImageObject",
  "contentUrl": {{ $image.Permalink }},
  "creditText": "Mimages Project",
  "license": "http://creativecommons.org/licenses/by/4.0/",
  "acquireLicensePage": "http://creativecommons.org/licenses/by/4.0/",
  "creator": {
    "@type": "Person",
    "name": "Brian Michalski"
    },
  "copyrightNotice": "Brian Michalski",
{{ with $image.Exif }}
  "locationCreated": {
    "@context": "https://schema.org",
    "@type": "Place",
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": "{{ .Lat }}",
      "longitude": "{{ .Long }}"
    }
  }
{{ end }}
}
</script>
<meta name="twitter:card" content="summary_large_image">
{{ $smaller := $image.Resize "960x" }}
<meta name="twitter:image" content="{{ $smaller.Permalink }}">
<meta property="og:image" content="{{ $smaller.Permalink }}">

{{ end }}

{{ define "main" }}

{{ $image := (index (.Resources.ByType "image") 0 ) }}
{{ $smaller := $image.Resize "960x" }}
<main>
  <h1>{{ .Description }}</h1>
  <div id="image">
  <a href="{{$image.Permalink}}" >
    <img alt="{{ .Description }}" src="{{$smaller.Permalink}}" width="{{ $smaller.Width }}" height="{{ $smaller.Height }}">
    <br />
    Full Image
  </a>
  </div>
  <dl>
    <dt>Photo Captured:</dt>
    <dd>{{ .Date.Format "Jan 2, 2006" }}</dd>
    {{ with $image.Exif }}
    <dt>Photo Location:</dt>
    <dd>{{ .Lat}}, {{ .Long }}</dd>
    {{ end }}
</dl>
</main>
{{ end }}